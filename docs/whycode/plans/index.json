{
  "version": "0.2.0",
  "generatedAt": "2026-02-23",
  "runId": "2026-02-23T14-50-00Z",
  "runName": "Trigger & Screenshot Fixes",
  "plans": [
    {
      "id": "fix-01",
      "name": "Async Trigger Activation",
      "type": "backend",
      "phase": 1,
      "packages": ["@shakenbake/core", "@shakenbake/react-native"],
      "dependsOn": [],
      "tasks": [
        {
          "id": "task-001",
          "name": "Make activateTriggers async with per-trigger error handling",
          "description": "Update TriggerPlugin.activate return type to void | Promise<void>. Change PluginRegistry.activateTriggers to async, await each trigger.activate(), log per-trigger failures without crashing the whole flow."
        },
        {
          "id": "task-002",
          "name": "Update ShakeNbakeProvider to await async trigger activation",
          "description": "Remove manual trigger iteration from provider. Call await registry.activateTriggers(handleTrigger) inside an async IIFE in useEffect. Preserve cancellation flag and cleanup (deactivateTriggers)."
        },
        {
          "id": "task-003",
          "name": "Add unit tests for async activateTriggers",
          "description": "Test PluginRegistry.activateTriggers: awaits async triggers in order, logs and continues on one trigger failure, handles mix of sync and async triggers."
        }
      ]
    },
    {
      "id": "fix-02",
      "name": "Android Screenshot & Documentation",
      "type": "frontend",
      "phase": 2,
      "packages": ["@shakenbake/react-native"],
      "dependsOn": ["fix-01"],
      "tasks": [
        {
          "id": "task-004",
          "name": "Add handleGLSurfaceViewOnAndroid for Android view-shot",
          "description": "In screenshot.ts captureRef call, add handleGLSurfaceViewOnAndroid: true on Android. Update CaptureRefFn type to include the option. Detect platform via React Native Platform module."
        },
        {
          "id": "task-005",
          "name": "Add react-native-shake autolinking workaround documentation",
          "description": "Create/update packages/react-native/README.md with troubleshooting section for react-native-shake autolinking in Expo monorepos. Include react-native.config.js workaround snippet. Note rebuild required after adding native deps and not supported in Expo Go."
        }
      ]
    }
  ]
}